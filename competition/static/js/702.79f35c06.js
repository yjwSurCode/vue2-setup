"use strict";(self["webpackChunkedu"]=self["webpackChunkedu"]||[]).push([[702],{84702:function(e,t,l){l.r(t),l.d(t,{default:function(){return y}});var r=function(){var e=this,t=e._self._c,l=e._self._setupProxy;return t(l.Layout,[t(l.Crumbs),t("div",{staticClass:"enroll-page"},[t("el-form",{ref:"formRef",staticClass:"form-content",attrs:{model:l.form,"label-position":"top",rules:l.rules,"label-width":"80px"}},[t("div",{staticClass:"form-title"},[t("div",[e._v("第四届全国高校立直麻将网络团体赛参赛")]),t("div",[e._v("请根据报名条件酌情考虑自己学校有无参赛能力，恶意填写调查表将会被标记。")]),t("div",[t("el-button",{attrs:{type:"primary",plain:""}},[t("i",{staticClass:"el-icon-time"}),e._v("03-01 14:00开始")])],1)]),t("div",{staticClass:"form-item"},[t("el-form-item",{attrs:{label:"选择填写报名内容",required:"",prop:"isLeader"}},[t("div",{staticClass:"form-discribe"},[e._v("是否作为领队")]),t("el-radio-group",{model:{value:l.form.isLeader,callback:function(t){e.$set(l.form,"isLeader",t)},expression:"form.isLeader"}},[t("el-radio",{attrs:{label:1}},[e._v("领队信息")]),t("el-radio",{attrs:{label:0}},[e._v("队员信息")])],1)],1)],1),t("div",{staticClass:"form-item"},[t("el-form-item",{attrs:{label:"学校名称",required:"",prop:"school"}},[t("div",{staticClass:"form-discribe"},[e._v("请填写参赛学校全称")]),t("el-input",{attrs:{placeholder:"请输入"},model:{value:l.form.school,callback:function(t){e.$set(l.form,"school",t)},expression:"form.school"}})],1)],1),t("div",{staticClass:"form-item"},[t("el-form-item",{attrs:{label:"是否参加第四届比赛",required:""}},[t("div",{staticClass:"form-discribe"},[e._v("不参扣将会直接取消报名预留资格")]),t("el-radio-group",{model:{value:l.form.isParticipate,callback:function(t){e.$set(l.form,"isParticipate",t)},expression:"form.isParticipate"}},[t("el-radio",{attrs:{label:1}},[e._v("是")]),t("el-radio",{attrs:{label:0}},[e._v("否")])],1)],1)],1),l.rules2.groupNickname?t("div",{staticClass:"form-item"},[t("el-form-item",{attrs:{label:"领队昵称",required:"",prop:"groupNickname"}},[t("div",{staticClass:"form-discribe"},[e._v("用于备注，交流时的称呼，请及时更改群昵称。")]),t("el-input",{attrs:{placeholder:"请输入"},model:{value:l.form.groupNickname,callback:function(t){e.$set(l.form,"groupNickname",t)},expression:"form.groupNickname"}})],1)],1):e._e(),l.rules2.coltNickname?t("div",{staticClass:"form-item"},[t("el-form-item",{attrs:{label:"队员昵称",required:"",prop:"coltNickname"}},[t("div",{staticClass:"form-discribe"},[e._v("用于备注，交流时的称呼。")]),t("el-input",{attrs:{placeholder:"请输入"},model:{value:l.form.coltNickname,callback:function(t){e.$set(l.form,"coltNickname",t)},expression:"form.coltNickname"}})],1)],1):e._e(),l.rules2.coltNumber?t("div",{staticClass:"form-item"},[t("el-form-item",{attrs:{label:"队员号码",required:"",prop:"coltNumber"}},[t("div",{staticClass:"form-discribe"},[e._v("请选择队员号码")]),t("el-select",{attrs:{placeholder:"请选择"},model:{value:l.form.coltNumber,callback:function(t){e.$set(l.form,"coltNumber",t)},expression:"form.coltNumber"}},[t("el-option",{attrs:{label:"1",value:"1"}},[e._v("1号")]),t("el-option",{attrs:{label:"2",value:"2"}},[e._v("2号")]),t("el-option",{attrs:{label:"3",value:"3"}},[e._v("3号")]),t("el-option",{attrs:{label:"4",value:"4"}},[e._v("4号")]),t("el-option",{attrs:{label:"5",value:"5"}},[e._v("5号")]),t("el-option",{attrs:{label:"6",value:"6"}},[e._v("6号")]),t("el-option",{attrs:{label:"7",value:"7"}},[e._v("7号")])],1)],1)],1):e._e(),t("div",{staticClass:"form-item"},[t("el-form-item",{attrs:{label:"QQ",required:"",prop:"qq"}},[t("div",{staticClass:"form-discribe"},[e._v("QQ号码")]),t("el-input",{attrs:{placeholder:"请输入"},model:{value:l.form.qq,callback:function(t){e.$set(l.form,"qq",t)},expression:"form.qq"}})],1)],1),l.rules2.association?t("div",{staticClass:"form-item"},[t("el-form-item",{attrs:{label:"参赛组织群号",required:"",prop:"association"}},[t("div",{staticClass:"form-discribe"},[e._v("所参加比赛时社团组织群号")]),t("el-input",{attrs:{placeholder:"请输入"},model:{value:l.form.association,callback:function(t){e.$set(l.form,"association",t)},expression:"form.association"}})],1)],1):e._e(),l.rules2.isPublic?t("div",{staticClass:"form-item"},[t("el-form-item",{attrs:{label:"是否愿意公开群号",required:"",prop:"isPublic"}},[t("div",{staticClass:"form-discribe"},[e._v("官方将会帮忙宣传")]),t("el-radio-group",{model:{value:l.form.isPublic,callback:function(t){e.$set(l.form,"isPublic",t)},expression:"form.isPublic"}},[t("el-radio",{attrs:{label:1}},[e._v("愿意")]),t("el-radio",{attrs:{label:0}},[e._v("不愿意")])],1)],1)],1):e._e(),l.rules2.uid?t("div",{staticClass:"form-item"},[t("el-form-item",{attrs:{label:"雀魂UID",required:"",prop:"uid"}},[t("div",{staticClass:"form-discribe"},[e._v("请填写UID")]),t("el-input",{attrs:{placeholder:"请输入"},model:{value:l.form.uid,callback:function(t){e.$set(l.form,"uid",t)},expression:"form.uid"}})],1)],1):e._e(),t("div",{staticClass:"form-item"},[t("el-form-item",{attrs:{label:"雀魂昵称",required:"",prop:"qhNickname"}},[t("div",{staticClass:"form-discribe"},[e._v("请填写雀魂昵称")]),t("el-input",{attrs:{placeholder:"请输入"},model:{value:l.form.qhNickname,callback:function(t){e.$set(l.form,"qhNickname",t)},expression:"form.qhNickname"}})],1)],1),t("div",{staticClass:"form-item"},[t("el-form-item",{attrs:{label:"雀魂段位",required:"",prop:"qhSegment"}},[t("div",{staticClass:"form-discribe"},[e._v("请选择雀魂段位")]),t("el-select",{attrs:{placeholder:"请选择"},model:{value:l.form.qhSegment,callback:function(t){e.$set(l.form,"qhSegment",t)},expression:"form.qhSegment"}},[t("el-option",{attrs:{label:"无",value:"无"}},[e._v("无")]),t("el-option",{attrs:{label:"雀豪以下",value:"雀豪以下"}},[e._v("雀豪以下")]),t("el-option",{attrs:{label:"雀豪1",value:"雀豪1"}},[e._v("雀豪1")]),t("el-option",{attrs:{label:"雀豪2",value:"雀豪2"}},[e._v("雀豪2")]),t("el-option",{attrs:{label:"雀豪3",value:"雀豪3"}},[e._v("雀豪3")]),t("el-option",{attrs:{label:"雀圣1",value:"雀圣1"}},[e._v("雀圣1")]),t("el-option",{attrs:{label:"雀圣2",value:"雀圣2"}},[e._v("雀圣2")]),t("el-option",{attrs:{label:"雀圣3",value:"雀圣3"}},[e._v("雀圣3")]),t("el-option",{attrs:{label:"魂天",value:"魂天"}},[e._v("魂天")])],1)],1)],1),t("div",{staticClass:"form-item"},[t("el-form-item",{attrs:{label:"天凤昵称",required:"",prop:"tfNickName"}},[t("div",{staticClass:"form-discribe"},[e._v("请填写天凤昵称")]),t("el-input",{attrs:{placeholder:"请输入"},model:{value:l.form.tfNickName,callback:function(t){e.$set(l.form,"tfNickName",t)},expression:"form.tfNickName"}})],1)],1),t("div",{staticClass:"form-item"},[t("el-form-item",{attrs:{label:"天凤段位",required:"",prop:"tfSegment"}},[t("div",{staticClass:"form-discribe"},[e._v("请选择天凤段位")]),t("el-select",{attrs:{placeholder:"请选择"},model:{value:l.form.tfSegment,callback:function(t){e.$set(l.form,"tfSegment",t)},expression:"form.tfSegment"}},[t("el-option",{attrs:{label:"无",value:"无"}},[e._v("无")]),t("el-option",{attrs:{label:"四段以下",value:"四段以下"}},[e._v("四段以下")]),t("el-option",{attrs:{label:"四段",value:"四段"}},[e._v("四段")]),t("el-option",{attrs:{label:"五段",value:"五段"}},[e._v("五段")]),t("el-option",{attrs:{label:"六段",value:"六段"}},[e._v("六段")]),t("el-option",{attrs:{label:"七段",value:"七段"}},[e._v("七段")]),t("el-option",{attrs:{label:"八段",value:"八段"}},[e._v("八段")]),t("el-option",{attrs:{label:"九段",value:"九段"}},[e._v("九段")]),t("el-option",{attrs:{label:"十段",value:"十段"}},[e._v("十段")])],1)],1)],1),t("div",{staticClass:"form-item"},[t("el-form-item",{attrs:{label:"在籍状态",required:"",prop:"state"}},[t("div",{staticClass:"form-discribe"},[e._v("请选择在籍状态")]),t("el-select",{attrs:{placeholder:"请选择"},model:{value:l.form.state,callback:function(t){e.$set(l.form,"state",t)},expression:"form.state"}},[t("el-option",{attrs:{label:"在校生",value:"在校生"}},[e._v("在校生")]),t("el-option",{attrs:{label:"毕业生",value:"毕业生"}},[e._v("毕业生")])],1)],1)],1),t("div",{staticClass:"form-item"},[t("el-form-item",{attrs:{label:"在校证明",required:"",prop:"certificateImgs"}},[t("div",{staticClass:"form-discribe-p"},[e._v(" 请已确定的带队领队附上自己的在校信息，在读证明，在校证明，学生证等。并且用空白 纸张书写上自己昵称，一并拍照上传。请勿遮挡姓名，有效期，年级和学校名称等； ")]),t("el-upload",{attrs:{accept:"jpg",action:"","list-type":"picture-card","before-upload":l.beforeAvatarUpload,"http-request":l.handleUpload,"on-change":l.handleChange,"on-progress":l.handleProgress,"on-success":l.handleSuccess,"on-remove":l.handleRemove,"file-list":l.fileList}},[t("i",{staticClass:"el-icon-plus"})])],1)],1),l.rules2.signImg?t("div",{staticClass:"form-item"},[t("el-form-item",{attrs:{label:"参赛承诺"}},[t("div",{staticClass:"form-discribe-p"},[e._v(" 本人已与学校组织及参赛选手进行过沟通，可作为领队代表学校组织及选手参加第四届全国高校立直麻 将网络团体赛，承诺赛程期间一切遵循主办方的赛制规定，共同维护比赛环境；如发生争议，本人将会 第一时间与主办方进行沟通协商，等待主办方裁决和调和，不私下在本校以外的公开场合，社交平台发 表对其他参赛学校或个人的负面舆论，攻击言语，以及可能影响比赛正常进行的行为，并约束本校参赛 组织及人员同样遵守；如违背参赛承诺，一切由本人及所代表的学校组织承担责任，接受主办方的惩罚 措施。 (签名请与在校证明上的姓名一致) ")]),t("el-card",{attrs:{shadow:"hover"}},[t("div",{staticClass:"card-title",on:{click:function(e){l.centerDialogVisible=!0}}},[e._v(" 点击签名"),t("span",{style:{color:"grey"}},[e._v(e._s(l.form.signImg?"（已上传）":"（未上传）"))])]),t("div",{staticClass:"card-text"},[e._v("签名将被记录为图片，可能被复制(?)")])])],1)],1):e._e(),t("el-dialog",{attrs:{title:"绘制签名",visible:l.centerDialogVisible,width:"60%",center:""},on:{"update:visible":function(e){l.centerDialogVisible=e}}},[t("vue-esign",{ref:"esignRef",attrs:{width:1600,height:800,isCrop:l.isCrop,lineWidth:l.lineWidth,lineColor:l.lineColor,bgColor:l.bgColor},on:{"update:bgColor":function(e){l.bgColor=e},"update:bg-color":function(e){l.bgColor=e}}}),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:l.handleReset}},[e._v("清空")]),t("el-button",{attrs:{type:"primary"},on:{click:l.handleGenerate}},[e._v("确 定")])],1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return l.submitForm("form")}}},[e._v("   提交   ")])],1)],1)],1),l.dialogVisible?t(l.SimpleLogin,{on:{FatherClick:l.FatherClick}}):e._e()],1)},a=[],s=(l(57658),l(25389)),o=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"breadcrumb-com"},[t("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t("img",{style:{width:"10px",height:"10px"},attrs:{src:l(98098),alt:""}}),e._v(" 首页")]),t("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("报名系统")]),t("el-breadcrumb-item",{staticClass:"currentTab",style:{color:"blue"}},[e._v("报名")])],1)],1)},i=[],c=l(27195),n=(0,c.defineComponent)({__name:"index",setup(e){return{__sfc:!0}}}),m=n,u=l(1001),f=(0,u.Z)(m,o,i,!1,null,null,null),d=f.exports,g=function(){var e=this,t=e._self._c,l=e._self._setupProxy;return t("div",{staticClass:"breadcrumb-com"},[t("el-dialog",{attrs:{title:"请登录",visible:l.dialogFormVisible},on:{"update:visible":function(e){l.dialogFormVisible=e}}},[t("el-form",{attrs:{model:l.form}},[t("el-form-item",{attrs:{label:"账号","label-width":l.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:l.form.name,callback:function(t){e.$set(l.form,"name",t)},expression:"form.name"}})],1),t("el-form-item",{attrs:{label:"密码","label-width":l.formLabelWidth}},[t("el-input",{attrs:{autocomplete:"off"},model:{value:l.form.pwd,callback:function(t){e.$set(l.form,"pwd",t)},expression:"form.pwd"}})],1)],1),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:l.cancle}},[e._v("取 消")]),t("el-button",{attrs:{type:"primary"},on:{click:l.confirm}},[e._v("确 定")])],1)],1)],1)},p=[],v=l(76824),b=(0,c.defineComponent)({__name:"index",setup(e){const t=()=>{const e=(0,c.getCurrentInstance)();if(!e)throw new Error("must be called in setup");return e.proxy},l=t();console.log("$VM",l);const r=(0,c.computed)((()=>(console.log(l.$props,"props"),!0)));(0,c.watchEffect)((()=>{console.log((0,c.getCurrentInstance)()?.proxy.$props,"getCurrentInstance()?.proxy.$props.dialogVisible")})),(0,c.watch)((()=>(0,c.getCurrentInstance)()?.proxy.$props),((e,t)=>{console.log(e,t,"$VM.$props.dialogVisible")}),{immediate:!0,deep:!0});const a="120px",s=(0,c.ref)({name:"",pwd:""}),o=()=>{console.log("1")},i=async()=>{console.log("1");await v.L.login_svc({username:s.value.name,password:s.value.pwd}).then((e=>{console.log(e,"result"),"200"==e.code?(l.$message({message:"登录成功",type:"success"}),localStorage.setItem("token",e.body.token),localStorage.setItem("userAccount",s.value.name),l.$emit("FatherClick")):l.$message({message:"登录失败",type:"error"})}))};return{__sfc:!0,useVM:t,$VM:l,dialogFormVisible:r,formLabelWidth:a,form:s,cancle:o,confirm:i}}}),h=b,_=(0,u.Z)(h,g,p,!1,null,null,null),C=_.exports,k={__name:"index",setup(e){const t=()=>{const e=(0,c.getCurrentInstance)();if(!e)throw new Error("must be called in setup");return e.proxy},l=()=>{const e=(0,c.getCurrentInstance)();if(!e)throw new Error("must be called in setup");return e.proxy.$router},r=t(),a=l();(0,c.onMounted)((()=>{r.$store.commit("changeNavbar","8"),console.log("$VM1",r,a.currentRoute.query,r.$store.state.navbarSelect)}));const o=(0,c.ref)(!localStorage.getItem("userAccount")),i=()=>{console.log("fffff",localStorage.getItem("userAccount")),o.value=!1};let n=(0,c.ref)(!1),m=(0,c.ref)(null),u=(0,c.ref)(6),f=(0,c.ref)("#000000"),g=(0,c.ref)("#f5f5f5"),p=(0,c.ref)(""),b=(0,c.ref)(!1);
//! 签名
const h=()=>{m.value.reset(),n.value=!1},_=()=>{console.log(m.value,"esignRef"),m.value.generate().then((e=>{console.log(e),V.signImg=e,n.value=!1})).catch((e=>{alert(e)}))};
//! 上传照片
let k=(0,c.ref)(""),q=(0,c.ref)(!1);const N=e=>{const t="image/jpeg"===e.type|"image/png"===e.type,l=e.size/1024/1024<2;return t?l?t&&l:(alert("上传头像图片大小不能超过 2MB!"),!1):(alert("上传头像图片只能是 JPG or PNG 格式!"),!1)},y=(e,t)=>{console.log(e,t),V.certificateImgs=[]},$=(e,t)=>{console.log(e,t)},x=(e,t)=>{console.log("handleChange",e,t)},I=(e,t)=>{console.log("handleSuccess",e,t)},w=async(e,t)=>{console.log("handleChange",e,t);await v.L.file_upload({files:t}).then((e=>{console.log(e,"result"),200===e.code?setTimeout((()=>{r.$message({message:"上传成功",type:"success"})}),500):
//!  处理页面 上传样式
r.$message({message:"上传失败",type:"error"}),V.certificateImgs.push(...e.body)}))},S=e=>{console.log(e,"file")},P=(0,c.ref)(),L=(0,c.ref)(null),V=(0,c.reactive)({isParticipate:0,school:"",groupNickname:"",qq:"",association:"",isPublic:0,isLeader:1,certificateImgs:[],signImg:"",
//! 队员昵称
coltNickname:"",
//!3 队员号码
coltNumber:"",
//!雀魂昵称
qhNickname:"",
//!雀魂段位
qhSegment:"",
//! uid
uid:"",
//! 天凤昵称
tfNickName:"",
//! 天凤段位
tfSegment:"",
//! 状态
state:""}),R=(0,c.ref)({isLeader:[{required:!1,message:"请选择是否领队",trigger:"change"}],qq:[{required:!1,message:"请填写QQ",trigger:"change"}],isParticipate:[{required:!1,message:"请选择是否参加第四届比赛",trigger:"change"}],isPublic:[{required:!1,message:"请选择是否公开群号",trigger:"change"}],uid:[{required:!1,message:"请填写uid",trigger:"change"}],association:[{required:!1,message:"请填写所参加比赛时社团组织群号",trigger:"change"}],coltNickname:[{required:!1,message:"请输入队员昵称",trigger:"change"}],school:[{required:!0,message:"请输入学校昵称",trigger:"change"}],qhNickname:[{required:!0,message:"请填写雀魂昵称",trigger:"change"}],qhSegment:[{required:!0,message:"请选择雀魂段位",trigger:"change"}],tfNickName:[{required:!0,message:"请填写天凤昵称",trigger:"change"}],tfSegment:[{required:!0,message:"请选择天凤段位",trigger:"change"}],state:[{required:!0,message:"请选择在籍状态",trigger:"change"}],certificateImgs:[{required:!0,message:"请上传学校证明",trigger:"change"}],groupNickname:[{required:!0,message:"请填写领队昵称",trigger:"change"}]}),F=(0,c.ref)({isParticipate:!0,school:!0,groupNickname:!0,qq:!0,association:!0,isPublic:!0,isLeader:!0,certificateImgs:!0,signImg:!0,
//! 队员昵称
coltNickname:!1,
//! 队员号码
coltNumber:!1,
//!雀魂昵称
qhNickname:!0,
//!雀魂段位
qhSegment:!0,
//! uid
uid:!0,
//! 天凤昵称
tfNickName:!0,
//! 天凤段位
tfSegment:!0,
//! 状态
state:!0});(0,c.watch)((()=>V.isLeader),((e,t)=>{console.log(e,t,"watch"),
//!不是领队
F.value=0===e?{isParticipate:!1,isLeader:!1,groupNickname:!1,association:!1,signImg:!1,isPublic:!1,school:!0,qq:!0,certificateImgs:!0,
//! 队员昵称
coltNickname:!0,
//! 队员号码
coltNumber:!0,
//!雀魂昵称
qhNickname:!0,
//!雀魂段位
qhSegment:!0,
//! uid
uid:!0,
//! 天凤昵称
tfNickName:!0,
//! 天凤段位
tfSegment:!0,
//! 状态
state:!0}:{
//! 队员昵称
coltNickname:!1,
//! 队员号码
coltNumber:!1,isPublic:!0,isParticipate:!0,school:!0,groupNickname:!0,qq:!0,association:!0,isLeader:!0,certificateImgs:!0,signImg:!0,
//!雀魂昵称
qhNickname:!0,
//!雀魂段位
qhSegment:!0,
//! uid
uid:!0,
//! 天凤昵称
tfNickName:!0,
//! 天凤段位
tfSegment:!0,
//! 状态
state:!0}}));const M=e=>{console.log(e)},D=e=>{console.log(L.value.model,L.value["formRef"],L.value,"formRef.value[formName]",V),1!=F.value.isLeader||V.signImg?0!=V.certificateImgs.length?L.value.validate((e=>{if(!e)return console.log("error submit!!"),!1;{
//! 数组转字符串
const e={...V,certificateImgs:V.certificateImgs.join(",")};console.log(e,"param");v.L.enroll(e).then((e=>{console.log("eeeee",e),"操作成功"==e.value?(r.$message({message:"提交成功",type:"success"}),setTimeout((()=>{a.go(0)}),1e3)):r.$message({message:"提交失败,请尝试重新登录提交",type:"error"})}))}})):r.$message({message:"请上传证明",type:"error"}):r.$message({message:"请手写签名",type:"error"})};return{__sfc:!0,useVM:t,useRouter:l,$VM:r,router:a,dialogVisible:o,FatherClick:i,centerDialogVisible:n,esignRef:m,lineWidth:u,lineColor:f,bgColor:g,resultImg:p,isCrop:b,handleReset:h,handleGenerate:_,dialogImageUrl:k,img_dialogVisible:q,beforeAvatarUpload:N,handleRemove:y,handleUpload:$,handleProgress:x,handleSuccess:I,handleChange:w,handlePictureCardPreview:S,fileList:P,formRef:L,form:V,rules:R,rules2:F,handleDropdown:M,submitForm:D,Layout:s.Z,Crumbs:d,SimpleLogin:C}}},q=k,N=(0,u.Z)(q,r,a,!1,null,null,null),y=N.exports},98098:function(e,t,l){e.exports=l.p+"static/img/home.9dd22475.svg"}}]);